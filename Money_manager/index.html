<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Money Manager v3.0</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     LOADING SCREEN
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="loading-screen" class="fullscreen-overlay">
    <div class="loading-content">
        <div class="app-logo-big">üí∞</div>
        <div class="loader-bar"><div class="loader-fill"></div></div>
        <p>Money Manager v3.0</p>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     AUTH SCREEN
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="auth-screen" class="fullscreen-overlay hidden">
    <div class="auth-bg">
        <div class="auth-blob b1"></div>
        <div class="auth-blob b2"></div>
        <div class="auth-blob b3"></div>
    </div>
    <div class="auth-card glass">
        <div class="auth-logo">üí∞</div>
        <h1 class="auth-title">Money Manager</h1>
        <p class="auth-sub">Apna hisaab, apne haath mein</p>
        <div class="auth-features">
            <span>üîí Secure</span>
            <span>‚òÅÔ∏è Cloud Sync</span>
            <span>üìä Analytics</span>
        </div>
        <button onclick="window.loginGoogle()" class="btn-google">
            <span class="material-icons-round">account_circle</span>
            Google se Login karo
        </button>
        <p class="auth-note">Your data is safe & encrypted</p>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     PASSWORD LOCK SCREEN (existing users)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="lock-screen" class="fullscreen-overlay hidden">
    <div class="auth-bg">
        <div class="auth-blob b1"></div>
        <div class="auth-blob b2"></div>
    </div>
    <div class="lock-card glass">
        <div class="lock-avatar" id="lock-avatar">üë§</div>
        <h2 id="lock-username">Welcome back!</h2>
        <p class="lock-sub">Enter your PIN to continue</p>
        <div class="pin-display" id="pin-display">
            <span class="pin-dot"></span>
            <span class="pin-dot"></span>
            <span class="pin-dot"></span>
            <span class="pin-dot"></span>
        </div>
        <div class="pin-pad">
            <button class="pin-btn" onclick="window.pinInput('1')">1</button>
            <button class="pin-btn" onclick="window.pinInput('2')">2</button>
            <button class="pin-btn" onclick="window.pinInput('3')">3</button>
            <button class="pin-btn" onclick="window.pinInput('4')">4</button>
            <button class="pin-btn" onclick="window.pinInput('5')">5</button>
            <button class="pin-btn" onclick="window.pinInput('6')">6</button>
            <button class="pin-btn" onclick="window.pinInput('7')">7</button>
            <button class="pin-btn" onclick="window.pinInput('8')">8</button>
            <button class="pin-btn" onclick="window.pinInput('9')">9</button>
            <button class="pin-btn pin-clear" onclick="window.pinClear()">
                <span class="material-icons-round">backspace</span>
            </button>
            <button class="pin-btn" onclick="window.pinInput('0')">0</button>
            <button class="pin-btn pin-ok" onclick="window.pinSubmit()">
                <span class="material-icons-round">check</span>
            </button>
        </div>
        <p id="pin-error" class="pin-error hidden">‚ùå Wrong PIN! Try again.</p>
        <button class="pin-forgot" onclick="window.forgotPin()">Forgot PIN?</button>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SET PIN SCREEN (new users / reset)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="setpin-screen" class="fullscreen-overlay hidden">
    <div class="auth-bg">
        <div class="auth-blob b1"></div>
        <div class="auth-blob b3"></div>
    </div>
    <div class="lock-card glass">
        <div class="setpin-step" id="setpin-step1">
            <div class="auth-logo">üîê</div>
            <h2>Set Your PIN</h2>
            <p class="lock-sub" id="setpin-msg">Apna 4-digit PIN set karo</p>
            <div class="pin-display" id="setpin-display">
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
                <span class="pin-dot"></span>
            </div>
            <div class="pin-pad">
                <button class="pin-btn" onclick="window.setPinInput('1')">1</button>
                <button class="pin-btn" onclick="window.setPinInput('2')">2</button>
                <button class="pin-btn" onclick="window.setPinInput('3')">3</button>
                <button class="pin-btn" onclick="window.setPinInput('4')">4</button>
                <button class="pin-btn" onclick="window.setPinInput('5')">5</button>
                <button class="pin-btn" onclick="window.setPinInput('6')">6</button>
                <button class="pin-btn" onclick="window.setPinInput('7')">7</button>
                <button class="pin-btn" onclick="window.setPinInput('8')">8</button>
                <button class="pin-btn" onclick="window.setPinInput('9')">9</button>
                <button class="pin-btn pin-clear" onclick="window.setPinClear()">
                    <span class="material-icons-round">backspace</span>
                </button>
                <button class="pin-btn" onclick="window.setPinInput('0')">0</button>
                <button class="pin-btn pin-ok" onclick="window.setPinNext()">
                    <span class="material-icons-round">check</span>
                </button>
            </div>
            <p id="setpin-error" class="pin-error hidden">‚ùå PINs don't match! Try again.</p>
        </div>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     MAIN APP
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="app" class="hidden">

    <!-- TOP BAR -->
    <div class="topbar" id="topbar">
        <div class="topbar-left">
            <span class="topbar-logo">üí∞</span>
            <span class="topbar-title" id="page-title">Dashboard</span>
        </div>
        <div class="topbar-right">
            <button class="top-icon-btn" onclick="window.toggleTheme()" id="theme-btn" title="Toggle Theme">
                <span class="material-icons-round">light_mode</span>
            </button>
            <button class="top-icon-btn" onclick="window.logout()" title="Logout">
                <span class="material-icons-round">logout</span>
            </button>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ PAGE: DASHBOARD ‚îÄ‚îÄ‚îÄ -->
    <div id="page-dashboard" class="page active">

        <!-- Hero -->
        <div class="hero-section">
            <div class="hero-greeting" id="hero-greeting">Good morning üëã</div>
            <div class="hero-name" id="hero-name">User</div>
            <div class="hero-total-label">Total Balance</div>
            <div class="hero-total" id="grand-total">‚Çπ0</div>
            <div class="hero-chips">
                <div class="hero-chip mine">
                    <span>üë§ Mera</span>
                    <strong id="my-total">‚Çπ0</strong>
                </div>
                <div class="hero-chip friends">
                    <span>üë• Friends</span>
                    <strong id="friends-total">‚Çπ0</strong>
                </div>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="quick-stats">
            <div class="stat-pill income">
                <span class="material-icons-round">trending_up</span>
                <div>
                    <small>Income</small>
                    <strong id="stat-income">‚Çπ0</strong>
                </div>
            </div>
            <div class="stat-pill expense">
                <span class="material-icons-round">trending_down</span>
                <div>
                    <small>Expense</small>
                    <strong id="stat-expense">‚Çπ0</strong>
                </div>
            </div>
            <div class="stat-pill savings">
                <span class="material-icons-round">savings</span>
                <div>
                    <small>Saved</small>
                    <strong id="stat-savings">‚Çπ0</strong>
                </div>
            </div>
        </div>

        <!-- Wallets Section -->
        <div class="section-header-row">
            <span class="section-label">Wallets & Friends</span>
            <button class="add-btn" onclick="window.promptPin('add-wallet')">
                <span class="material-icons-round">add</span> Add
            </button>
        </div>
        <div id="wallets-scroll" class="wallets-scroll"></div>

        <!-- Recent Transactions (preview) -->
        <div class="section-header-row">
            <span class="section-label">Recent Activity</span>
            <button class="see-all-btn" onclick="window.goToPage('transactions')">See All</button>
        </div>
        <div id="recent-list" class="tx-list"></div>

    </div>

    <!-- ‚îÄ‚îÄ‚îÄ PAGE: TRANSACTIONS ‚îÄ‚îÄ‚îÄ -->
    <div id="page-transactions" class="page hidden">

        <div class="page-top-area">
            <div class="search-wrap">
                <span class="material-icons-round">search</span>
                <input type="text" id="tx-search" placeholder="Search..." oninput="window.applyFilters()">
            </div>
            <div class="filter-chips-row">
                <button class="chip active" onclick="window.setTypeFilter('all',this)">All</button>
                <button class="chip" onclick="window.setTypeFilter('deposit',this)">üìà Income</button>
                <button class="chip" onclick="window.setTypeFilter('expense',this)">üìâ Expense</button>
                <button class="chip" onclick="window.setTypeFilter('transfer',this)">üîÅ Transfer</button>
                <button class="chip" onclick="window.setTypeFilter('settlement',this)">ü§ù Settle</button>
            </div>
            <div class="month-row">
                <span class="material-icons-round" style="color:var(--text3)">calendar_month</span>
                <select id="month-select" onchange="window.applyFilters()">
                    <option value="">All Time</option>
                </select>
            </div>
        </div>

        <div class="tx-count-row">
            <span id="tx-count-label" style="color:var(--text3);font-size:0.85em">0 transactions</span>
        </div>
        <div id="tx-list-full" class="tx-list"></div>

    </div>

    <!-- ‚îÄ‚îÄ‚îÄ PAGE: ANALYTICS ‚îÄ‚îÄ‚îÄ -->
    <div id="page-analytics" class="page hidden">

        <div class="analytics-month-row">
            <button class="an-nav-btn" onclick="window.analyticsMonthNav(-1)">
                <span class="material-icons-round">chevron_left</span>
            </button>
            <span id="analytics-month-label" class="analytics-month-label">This Month</span>
            <button class="an-nav-btn" onclick="window.analyticsMonthNav(1)">
                <span class="material-icons-round">chevron_right</span>
            </button>
        </div>

        <!-- Summary Cards -->
        <div class="analytics-summary">
            <div class="an-card income-card">
                <div class="an-card-label">Income</div>
                <div class="an-card-val" id="an-income">‚Çπ0</div>
            </div>
            <div class="an-card expense-card">
                <div class="an-card-label">Expense</div>
                <div class="an-card-val" id="an-expense">‚Çπ0</div>
            </div>
            <div class="an-card savings-card">
                <div class="an-card-label">Net Saved</div>
                <div class="an-card-val" id="an-savings">‚Çπ0</div>
            </div>
        </div>

        <!-- Bar Chart: Daily spending -->
        <div class="chart-card glass">
            <div class="chart-title">üìÖ Daily Overview</div>
            <div class="chart-wrap">
                <canvas id="bar-chart"></canvas>
            </div>
        </div>

        <!-- Donut Chart: Category breakdown -->
        <div class="chart-card glass">
            <div class="chart-title">üè∑Ô∏è Category Breakdown</div>
            <div class="donut-wrap">
                <canvas id="donut-chart"></canvas>
            </div>
            <div id="cat-legend" class="cat-legend"></div>
        </div>

        <!-- Budget Progress -->
        <div class="chart-card glass" id="budget-section">
            <div class="chart-title">üí∏ Budget Status</div>
            <div id="budget-progress-list"></div>
        </div>

    </div>

    <!-- ‚îÄ‚îÄ‚îÄ PAGE: SETTINGS ‚îÄ‚îÄ‚îÄ -->
    <div id="page-settings" class="page hidden">

        <!-- Profile Card -->
        <div class="profile-card glass">
            <div class="profile-avatar" id="settings-avatar">üë§</div>
            <div class="profile-info">
                <div class="profile-name" id="settings-name">User</div>
                <div class="profile-email" id="settings-email">user@gmail.com</div>
            </div>
        </div>

        <!-- Settings Groups -->
        <div class="settings-group">
            <div class="settings-group-label">Security</div>
            <div class="settings-item" onclick="window.openChangePinFlow()">
                <div class="si-left">
                    <span class="si-icon" style="background:var(--purple-dim);color:var(--primary)">
                        <span class="material-icons-round">lock_reset</span>
                    </span>
                    <div>
                        <div class="si-title">Change PIN</div>
                        <div class="si-sub">Update your security PIN</div>
                    </div>
                </div>
                <span class="material-icons-round si-arrow">chevron_right</span>
            </div>
        </div>

        <div class="settings-group">
            <div class="settings-group-label">Finance</div>
            <div class="settings-item" onclick="window.promptPin('budget')">
                <div class="si-left">
                    <span class="si-icon" style="background:var(--green-dim);color:var(--green)">
                        <span class="material-icons-round">savings</span>
                    </span>
                    <div>
                        <div class="si-title">Budget Limits</div>
                        <div class="si-sub">Set monthly category limits</div>
                    </div>
                </div>
                <span class="material-icons-round si-arrow">chevron_right</span>
            </div>
            <div class="settings-item" onclick="window.promptPin('manage-categories')">
                <div class="si-left">
                    <span class="si-icon" style="background:var(--orange-dim);color:var(--orange)">
                        <span class="material-icons-round">category</span>
                    </span>
                    <div>
                        <div class="si-title">Categories</div>
                        <div class="si-sub">Add or remove categories</div>
                    </div>
                </div>
                <span class="material-icons-round si-arrow">chevron_right</span>
            </div>
        </div>

        <div class="settings-group">
            <div class="settings-group-label">Data</div>
            <div class="settings-item" onclick="window.exportCSV()">
                <div class="si-left">
                    <span class="si-icon" style="background:var(--blue-dim);color:#2196F3">
                        <span class="material-icons-round">download</span>
                    </span>
                    <div>
                        <div class="si-title">Export CSV</div>
                        <div class="si-sub">Download all transactions</div>
                    </div>
                </div>
                <span class="material-icons-round si-arrow">chevron_right</span>
            </div>
        </div>

        <div class="settings-group">
            <div class="settings-group-label">Appearance</div>
            <div class="settings-item" onclick="window.toggleTheme()">
                <div class="si-left">
                    <span class="si-icon" style="background:#333;color:#fff" id="theme-si-icon">
                        <span class="material-icons-round">dark_mode</span>
                    </span>
                    <div>
                        <div class="si-title" id="theme-si-label">Switch to Light Mode</div>
                        <div class="si-sub">Change app appearance</div>
                    </div>
                </div>
                <span class="material-icons-round si-arrow">chevron_right</span>
            </div>
        </div>

        <div class="settings-group">
            <div class="settings-item danger-item" onclick="window.logout()">
                <div class="si-left">
                    <span class="si-icon" style="background:var(--red-dim);color:var(--red)">
                        <span class="material-icons-round">logout</span>
                    </span>
                    <div>
                        <div class="si-title" style="color:var(--red)">Logout</div>
                        <div class="si-sub">Sign out of your account</div>
                    </div>
                </div>
                <span class="material-icons-round si-arrow" style="color:var(--red)">chevron_right</span>
            </div>
        </div>

        <div class="app-version">Money Manager v3.0 ‚Ä¢ Made with ‚ù§Ô∏è by Chaman Hub</div>

    </div>

    <!-- BOTTOM NAV -->
    <nav class="bottom-nav">
        <button class="nav-btn active" id="nav-dashboard" onclick="window.goToPage('dashboard')">
            <span class="material-icons-round">home</span>
            <span>Home</span>
        </button>
        <button class="nav-btn" id="nav-transactions" onclick="window.goToPage('transactions')">
            <span class="material-icons-round">receipt_long</span>
            <span>History</span>
        </button>
        <button class="nav-fab-btn" onclick="window.openModal('tx-modal')">
            <span class="material-icons-round">add</span>
        </button>
        <button class="nav-btn" id="nav-analytics" onclick="window.goToPage('analytics')">
            <span class="material-icons-round">bar_chart</span>
            <span>Analytics</span>
        </button>
        <button class="nav-btn" id="nav-settings" onclick="window.goToPage('settings')">
            <span class="material-icons-round">settings</span>
            <span>Settings</span>
        </button>
    </nav>

</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     MODALS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

<!-- TRANSACTION MODAL -->
<div id="tx-modal" class="modal hidden">
    <div class="modal-sheet">
        <div class="sheet-handle"></div>
        <div class="modal-header">
            <h3>New Transaction</h3>
            <button class="close-x" onclick="window.closeModal('tx-modal')">
                <span class="material-icons-round">close</span>
            </button>
        </div>
        <div class="tx-type-tabs">
            <button class="tx-tab active" id="ttab-deposit" onclick="window.setTxType('deposit',this)">
                <span class="material-icons-round">arrow_downward</span>
                <span>Income</span>
            </button>
            <button class="tx-tab" id="ttab-expense" onclick="window.setTxType('expense',this)">
                <span class="material-icons-round">arrow_upward</span>
                <span>Expense</span>
            </button>
            <button class="tx-tab" id="ttab-transfer" onclick="window.setTxType('transfer',this)">
                <span class="material-icons-round">swap_horiz</span>
                <span>Transfer</span>
            </button>
            <button class="tx-tab" id="ttab-settlement" onclick="window.setTxType('settlement',this)">
                <span class="material-icons-round">handshake</span>
                <span>Settle</span>
            </button>
        </div>

        <select id="tx-from-wallet" class="form-select">
            <option value="" disabled selected>Select Account</option>
        </select>

        <div id="tx-to-wrap" class="hidden">
            <select id="tx-to-wallet" class="form-select">
                <option value="" disabled selected>Transfer To ‚Üí</option>
            </select>
        </div>

        <div id="tx-settle-wrap" class="hidden">
            <select id="tx-settle-reason" class="form-select">
                <option value="udhar">üí∏ Udhar Wapas (Loan Return)</option>
                <option value="diya">üéÅ Gift / Apne se diya</option>
                <option value="split">üçΩÔ∏è Bill Split</option>
                <option value="kiraya">üè† Kiraya</option>
                <option value="other">üìå Other</option>
            </select>
        </div>

        <div class="amount-input-wrap">
            <span class="currency-sym">‚Çπ</span>
            <input type="number" id="tx-amount" class="amount-input" placeholder="0" min="1">
        </div>

        <input type="text" id="tx-desc" class="form-input" placeholder="Note (e.g. Rent, Lunch)">

        <div id="tx-cat-wrap">
            <div class="cat-select-row">
                <select id="tx-cat" class="form-select" style="flex:1">
                    <option value="">Category (Optional)</option>
                </select>
                <button class="add-cat-btn" onclick="window.openModal('add-cat-modal')" title="New Category">
                    <span class="material-icons-round">add_circle</span>
                </button>
            </div>
        </div>

        <button onclick="window.saveTransaction()" class="btn-primary full-btn">
            <span class="material-icons-round">save</span> Save Transaction
        </button>
    </div>
</div>

<!-- ADD WALLET MODAL (PIN protected) -->
<div id="add-wallet-modal" class="modal hidden">
    <div class="modal-sheet">
        <div class="sheet-handle"></div>
        <div class="modal-header">
            <h3>Add Wallet</h3>
            <button class="close-x" onclick="window.closeModal('add-wallet-modal')">
                <span class="material-icons-round">close</span>
            </button>
        </div>
        <div class="wallet-type-toggle">
            <button class="wt-btn active" id="wt-mine" onclick="window.setWalletType('owner',this)">üë§ Mine</button>
            <button class="wt-btn" id="wt-friend" onclick="window.setWalletType('friend',this)">üë• Friend</button>
        </div>
        <input type="text" id="nw-name" class="form-input" placeholder="Name (e.g. Vip, My Bank)">
        <input type="number" id="nw-bal" class="form-input" placeholder="Opening Balance (‚Çπ)">
        <button onclick="window.addWallet()" class="btn-primary full-btn">Create Wallet</button>
    </div>
</div>

<!-- WALLET DETAIL MODAL -->
<div id="wallet-detail-modal" class="modal hidden">
    <div class="modal-sheet">
        <div class="sheet-handle"></div>
        <div class="wallet-detail-header">
            <div class="wd-avatar" id="wd-avatar">üë§</div>
            <h2 id="wd-name">Wallet</h2>
            <div class="wd-balance" id="wd-balance">‚Çπ0</div>
            <div id="wd-lock-badge" class="wd-lock-badge hidden"></div>
        </div>
        <div class="wd-actions">
            <button class="wd-btn" onclick="window.promptPin('edit-wallet')">
                <span class="material-icons-round">edit</span>Edit
            </button>
            <button class="wd-btn" onclick="window.promptPin('lock-money')">
                <span class="material-icons-round">lock</span>Lock
            </button>
            <button class="wd-btn danger" onclick="window.promptPin('delete-wallet')">
                <span class="material-icons-round">delete</span>Delete
            </button>
        </div>
    </div>
</div>

<!-- EDIT WALLET MODAL -->
<div id="edit-wallet-modal" class="modal hidden">
    <div class="modal-sheet">
        <div class="sheet-handle"></div>
        <div class="modal-header">
            <h3>Edit Wallet</h3>
            <button class="close-x" onclick="window.closeModal('edit-wallet-modal')">
                <span class="material-icons-round">close</span>
            </button>
        </div>
        <input type="hidden" id="ew-id">
        <input type="text" id="ew-name" class="form-input" placeholder="Name">
        <input type="number" id="ew-bal" class="form-input" placeholder="Balance (‚Çπ)">
        <button onclick="window.saveWalletEdit()" class="btn-primary full-btn">Save Changes</button>
    </div>
</div>

<!-- LOCK MONEY MODAL -->
<div id="lock-modal" class="modal hidden">
    <div class="modal-sheet">
        <div class="sheet-handle"></div>
        <div class="modal-header">
            <h3>üîí Lock Money</h3>
            <button class="close-x" onclick="window.closeModal('lock-modal')">
                <span class="material-icons-round">close</span>
            </button>
        </div>
        <p class="form-hint">Locked amount stays hidden from spendable balance. Alert aayega jab paas pahuncho.</p>
        <input type="hidden" id="lm-wallet-id">
        <input type="number" id="lm-amount" class="form-input" placeholder="Lock Amount (‚Çπ)">
        <input type="text" id="lm-reason" class="form-input" placeholder="Reason (e.g. Emergency Fund)">
        <input type="number" id="lm-threshold" class="form-input" placeholder="Alert when available < (‚Çπ)">
        <div class="row-btns">
            <button onclick="window.removeLock()" class="btn-secondary">Remove Lock</button>
            <button onclick="window.saveLock()" class="btn-primary">Lock üîí</button>
        </div>
    </div>
</div>

<!-- ADD CATEGORY MODAL -->
<div id="add-cat-modal" class="modal hidden">
    <div class="modal-sheet">
        <div class="sheet-handle"></div>
        <div class="modal-header">
            <h3>New Category</h3>
            <button class="close-x" onclick="window.closeModal('add-cat-modal')">
                <span class="material-icons-round">close</span>
            </button>
        </div>
        <input type="text" id="nc-emoji" class="form-input" placeholder="Emoji (e.g. üè†)" maxlength="4">
        <input type="text" id="nc-name" class="form-input" placeholder="Category name (e.g. Kiraya)">
        <button onclick="window.addCategory()" class="btn-primary full-btn">Add Category</button>
    </div>
</div>

<!-- BUDGET MODAL -->
<div id="budget-modal" class="modal hidden">
    <div class="modal-sheet">
        <div class="sheet-handle"></div>
        <div class="modal-header">
            <h3>üí∏ Budget Limits</h3>
            <button class="close-x" onclick="window.closeModal('budget-modal')">
                <span class="material-icons-round">close</span>
            </button>
        </div>
        <p class="form-hint">Monthly spending limit per category set karo.</p>
        <select id="budget-cat" class="form-select"></select>
        <input type="number" id="budget-amt" class="form-input" placeholder="Monthly limit (‚Çπ)">
        <button onclick="window.saveBudget()" class="btn-primary full-btn">Set Limit</button>
        <div id="budget-list" class="budget-list"></div>
    </div>
</div>

<!-- MANAGE CATEGORIES MODAL -->
<div id="manage-cat-modal" class="modal hidden">
    <div class="modal-sheet">
        <div class="sheet-handle"></div>
        <div class="modal-header">
            <h3>Manage Categories</h3>
            <button class="close-x" onclick="window.closeModal('manage-cat-modal')">
                <span class="material-icons-round">close</span>
            </button>
        </div>
        <button onclick="window.openModal('add-cat-modal')" class="btn-secondary full-btn" style="margin-bottom:12px">
            <span class="material-icons-round">add</span> Add New Category
        </button>
        <div id="all-cats-list" class="all-cats-list"></div>
    </div>
</div>

<!-- PIN VERIFY MODAL (for protected actions) -->
<div id="pin-verify-modal" class="modal hidden">
    <div class="modal-sheet">
        <div class="sheet-handle"></div>
        <div class="modal-header">
            <h3>üîê Verify PIN</h3>
            <button class="close-x" onclick="window.closeModal('pin-verify-modal')">
                <span class="material-icons-round">close</span>
            </button>
        </div>
        <p class="form-hint" id="pin-verify-msg">This action requires your PIN.</p>
        <div class="pin-display mini" id="pin-verify-display">
            <span class="pin-dot"></span>
            <span class="pin-dot"></span>
            <span class="pin-dot"></span>
            <span class="pin-dot"></span>
        </div>
        <div class="pin-pad">
            <button class="pin-btn" onclick="window.verifyPinInput('1')">1</button>
            <button class="pin-btn" onclick="window.verifyPinInput('2')">2</button>
            <button class="pin-btn" onclick="window.verifyPinInput('3')">3</button>
            <button class="pin-btn" onclick="window.verifyPinInput('4')">4</button>
            <button class="pin-btn" onclick="window.verifyPinInput('5')">5</button>
            <button class="pin-btn" onclick="window.verifyPinInput('6')">6</button>
            <button class="pin-btn" onclick="window.verifyPinInput('7')">7</button>
            <button class="pin-btn" onclick="window.verifyPinInput('8')">8</button>
            <button class="pin-btn" onclick="window.verifyPinInput('9')">9</button>
            <button class="pin-btn pin-clear" onclick="window.verifyPinClear()">
                <span class="material-icons-round">backspace</span>
            </button>
            <button class="pin-btn" onclick="window.verifyPinInput('0')">0</button>
            <button class="pin-btn pin-ok" onclick="window.verifyPinSubmit()">
                <span class="material-icons-round">check</span>
            </button>
        </div>
        <p id="pin-verify-error" class="pin-error hidden">‚ùå Wrong PIN!</p>
    </div>
</div>

<!-- TOAST -->
<div id="toast" class="toast"></div>

<script type="module" src="script.js"></script>
</body>
</html>
