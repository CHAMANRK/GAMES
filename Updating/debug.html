<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Debug Test</title>
  <style>
    body { background: #111; color: #0f0; font-family: monospace; padding: 20px; font-size: 14px; }
    .err { color: #f55; }
    .ok  { color: #0f0; }
    .warn{ color: #ff0; }
    h2   { color: #0af; }
  </style>
</head>
<body>
  <h2>üîç Debug Console</h2>
  <div id="out"></div>

<script>
  const out = document.getElementById('out');
  function log(msg, type='ok') {
    const d = document.createElement('div');
    d.className = type;
    d.textContent = '[' + new Date().toLocaleTimeString() + '] ' + msg;
    out.appendChild(d);
  }

  window.onerror = function(msg, src, line, col, err) {
    log('‚ùå ERROR: ' + msg + ' | File: ' + src + ' | Line: ' + line, 'err');
    return false;
  };

  window.addEventListener('unhandledrejection', function(e) {
    log('‚ùå PROMISE ERROR: ' + (e.reason?.message || e.reason), 'err');
  });

  log('‚úÖ Debug page loaded');
  log('üì¶ Testing module imports...');
</script>

<!-- Test config.js -->
<script type="module">
  import('/config.js')
    .then(m => {
      document.getElementById('out').insertAdjacentHTML('beforeend',
        '<div class="ok">‚úÖ config.js loaded ‚Äî apiKey: ' + (m.CONFIG?.FIREBASE_CONFIG?.apiKey ? 'found' : 'MISSING') + '</div>');
    })
    .catch(e => {
      document.getElementById('out').insertAdjacentHTML('beforeend',
        '<div class="err">‚ùå config.js FAILED: ' + e.message + '</div>');
    });
</script>

<script type="module">
  import('/js/modules/managers.js')
    .then(() => {
      document.getElementById('out').insertAdjacentHTML('beforeend',
        '<div class="ok">‚úÖ managers.js loaded</div>');
    })
    .catch(e => {
      document.getElementById('out').insertAdjacentHTML('beforeend',
        '<div class="err">‚ùå managers.js FAILED: ' + e.message + '</div>');
    });
</script>

<script type="module">
  import('/js/modules/firebase.js')
    .then(() => {
      document.getElementById('out').insertAdjacentHTML('beforeend',
        '<div class="ok">‚úÖ firebase.js loaded</div>');
    })
    .catch(e => {
      document.getElementById('out').insertAdjacentHTML('beforeend',
        '<div class="err">‚ùå firebase.js FAILED: ' + e.message + '</div>');
    });
</script>

<script type="module">
  import('/js/state/appState.js')
    .then(() => {
      document.getElementById('out').insertAdjacentHTML('beforeend',
        '<div class="ok">‚úÖ appState.js loaded</div>');
    })
    .catch(e => {
      document.getElementById('out').insertAdjacentHTML('beforeend',
        '<div class="err">‚ùå appState.js FAILED: ' + e.message + '</div>');
    });
</script>

<script type="module">
  import('/js/modules/auth.js')
    .then(() => {
      document.getElementById('out').insertAdjacentHTML('beforeend',
        '<div class="ok">‚úÖ auth.js loaded</div>');
    })
    .catch(e => {
      document.getElementById('out').insertAdjacentHTML('beforeend',
        '<div class="err">‚ùå auth.js FAILED: ' + e.message + '</div>');
    });
</script>

<script type="module">
  import('/js/app.js')
    .then(() => {
      document.getElementById('out').insertAdjacentHTML('beforeend',
        '<div class="ok">‚úÖ app.js loaded ‚Äî ALL GOOD!</div>');
    })
    .catch(e => {
      document.getElementById('out').insertAdjacentHTML('beforeend',
        '<div class="err">‚ùå app.js FAILED: ' + e.message + '</div>');
    });
</script>

</body>
</html>
